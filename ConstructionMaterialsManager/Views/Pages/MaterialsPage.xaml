<!-- MaterialsPage.xaml (исправленный) -->
<UserControl x:Class="ConstructionMaterialsManager.Views.Pages.MaterialsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="5" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal">
                <Button x:Name="AddMaterialBtn" Content="➕ Добавить" ToolTip="Добавить материал" Click="AddMaterialBtn_Click"
                        Margin="0,0,10,0" Padding="10,5" Background="#4361EE" Foreground="White"/>
                <Button x:Name="EditMaterialBtn" Content="✏️ Редактировать" ToolTip="Редактировать материал" Click="EditMaterialBtn_Click"
                        Margin="0,0,10,0" Padding="10,5" Background="#4361EE" Foreground="White"/>
                <Button x:Name="DeleteMaterialBtn" Content="🗑️ Удалить" ToolTip="Удалить материал" Click="DeleteMaterialBtn_Click"
                        Padding="10,5" Background="#4361EE" Foreground="White"/>
            </StackPanel>
        </Border>

        <!-- Filters -->
        <Border Grid.Row="1" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal">
                <Grid>
                    <TextBox x:Name="MaterialFilterTextBox" Width="250" TextChanged="MaterialFilterTextBox_TextChanged" Margin="0,0,10,0"/>
                    <TextBlock x:Name="MaterialFilterWatermark" Text="🔍 Поиск по названию..." Margin="5,0,0,0"
                               Foreground="#888" VerticalAlignment="Center" IsHitTestVisible="False"/>
                </Grid>
                <ComboBox x:Name="SupplierFilter" Width="200" Margin="0,0,0,0" DisplayMemberPath="Name"
                          SelectedValuePath="SupplierId" SelectionChanged="SupplierFilter_SelectionChanged"/>
            </StackPanel>
        </Border>

        <!-- DataGrid -->
        <Border Grid.Row="2" BorderBrush="#E0E0E0" BorderThickness="1">
            <DataGrid x:Name="MaterialsDataGrid" AutoGenerateColumns="False" CanUserAddRows="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Название" Binding="{Binding Name}" Width="*"/>
                    <DataGridTextColumn Header="Ед. изм." Binding="{Binding Unit}" Width="Auto"/>
                    <DataGridTextColumn Header="Стоимость за ед." Binding="{Binding CostPerUnit, StringFormat={}{0} руб.}" Width="Auto"/>
                    <DataGridTextColumn Header="Поставщик" Binding="{Binding Supplier.Name}" Width="*"/>
                    <DataGridTextColumn Header="Текущий запас" Binding="{Binding CurrentStock}" Width="Auto"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>
